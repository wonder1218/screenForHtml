<!--
 * @Author: wonder1218 zhengwen_man@163.com
 * @Date: 2025-05-26 17:28:14
 * @LastEditors: wonder1218 zhengwen_man@163.com
 * @LastEditTime: 2025-06-19 17:58:45
 * @FilePath: \ECharts\å¤§å±ç¤ºä¾‹.html
 * @Description: è¿™æ˜¯é»˜è®¤è®¾ç½®,è¯·è®¾ç½®`customMade`, æ‰“å¼€koroFileHeaderæŸ¥çœ‹é…ç½® è¿›è¡Œè®¾ç½®: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE
-->
<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>å¤§å±ç¤ºä¾‹</title>
  <!-- å¼•å…¥ ECharts -->
  <script src="assets/js/echarts.min.js"></script>
  <script src="assets/js/jquery.js"></script>
  <link rel="stylesheet" type="text/css" href="assets/css/index.css" />
  <script src="assets/js/vue.js"></script>
  <script src="assets/js/elementIndex.js"></script>
  <!-- <script src="assets/js/global.js"></script> -->
  <!-- <script src="./assets/js/three.core.min.js"></script>
  <script src="assets/js/OrbitControls.js"></script>
  <script src="assets/js/tween.umd.js"></script> -->
  <!-- å¼•å…¥æ ·å¼ -->
  <link rel="stylesheet" href="assets/css/elementIndex.css">
  <style>
    #map-container {
      width: 100%;
      height: 600px;
    }
  </style>
</head>

<body>
  <div class="contain" id="app">
    <!-- é¡¶éƒ¨ -->
    <div class="top">
      <div class="logo-img">
        <p style="font-size: 30px">XXXXlogo</p>
      </div>
      <div class="title">é£é™©æ”¶ç›Šæ°´å¹³ç®¡ç†é©¾é©¶èˆ±</div>
      <img class="close-img" src="assets/images/screenfull/close.png" />
    </div>
    <!-- å†…å®¹ -->
    <div class="content">
      <!-- å·¦è¾¹ -->
      <div class="left">
        <!-- å®æ—¶å†’çƒŸç›‘æµ‹ -->
        <div class="customer-monitor">
          <div class="subtitle">
            <div class="subtitle-text pointer">æ¡çº¿çº¬åº¦</div>
            <img class="subtitle-img" src="assets/images/screenfull/risk_title_bg.png" />
          </div>
          <div class="button-wrap">
            <el-select v-model="valueLine" placeholder="è¯·é€‰æ‹©" @change="handleLineChange">
              <el-option v-for="item in optionsLine" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
          </div>
          <div class="customer">
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">æœ¬æœŸé£é™©æ”¶ç›Šæ°´å¹³</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/cardImg1.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">1.68</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">å¹´åˆé£é™©æ”¶ç›Šæ°´å¹³</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/cardImg1.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">1.89</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">è¾ƒå¹´åˆ</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/down.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">0.21</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="pie-3d" id="stripLineEcharts"></div>
        <div class="smoke-trend">
          <div class="subtitle">
            <div class="subtitle-text">æœºæ„çº¬åº¦æ±‡æ€»</div>
            <img class="subtitle-img" src="assets/images/screenfull/risk_title_bg.png" />
          </div>
          <div class="bank-range">
            <el-select v-model="valueOrg" placeholder="è¯·é€‰æ‹©" @change="handleOrgChange">
              <el-option v-for="item in optionsOrg" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
          </div>
          <div class="card-wrap">
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">æœ¬æœŸé£é™©æ”¶ç›Šæ°´å¹³</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/cardImg1.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">1.68</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">å¹´åˆé£é™©æ”¶ç›Šæ°´å¹³</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/cardImg1.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">1.89</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">è¾ƒå¹´åˆ</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/down.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">0.21</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="trend-chart" id="orgLatTotalEcharts"></div>
          <img class="smoke-trend-line" src="assets/images/screenfull/mapLine_bottom.png" />
        </div>
      </div>
      <div class="middle">
        <div class="map">
          <img class="map-bg" src="assets/images/screenfull/map_bg.png" />
          <img class="map-round-bg" src="assets/images/screenfull/map_bg_round.png" />
          <img class="map-top-bg" src="assets/images/screenfull/maptop_bg.png" />
          <img class="mapline-top" src="assets/images/screenfull/mapLine_top.png" />
          <img class="mapline-bottom" src="assets/images/screenfull/mapLine_bottom.png" />
          <img class="mapline-left" src="assets/images/screenfull/mapLine_left.png" />
          <img class="mapline-right" src="assets/images/screenfull/mapLine_right.png" />
          <!-- <div id="mapDiv" style="height: 600px; width: 800px"></div> -->
          <!-- <div style="height: 600px;width: 800px;" id="mapDiv"></div> -->
          <div id="container"></div>
          <div class="center-label">32%<br><span style="font-size:28px;font-weight:normal;">é¡¹ç›®æ•°</span></div>
          <button id="btn-prev" class="btn prev">&#8592;</button>
          <button id="btn-next" class="btn next">&#8594;</button>
          <div class="popup" id="popup"></div>
        </div>
        <div class="wordcloud">
          <!-- <div class="wordcloud-title">æœºæ„çº¬åº¦æ±‡æ€»</div> -->
          <!-- <div style="display: flex;"> -->
          <div class="wordcloud-content" style="height: 230px; width: 760px" id="productDistribute"></div>
          <div class="wordcloud-content" style="height: 230px; width: 760px" id="customerDistribute"></div>
          <!-- </div> -->
          <img class="wordcloud-line" src="assets/images/screenfull/mapLine_bottom.png" />
        </div>
      </div>
      <!-- å³è¾¹ -->
      <div class="right">
        <div class="block1">
          <div class="subtitle1">
            <div class="subtitle-text1">äº§å“ç»´åº¦</div>
            <img class="subtitle-img1" src="assets/images/screenfull/risk_title_bg.png" />
          </div>
          <div class="bank-range">
            <el-select v-model="valueProduct" placeholder="è¯·é€‰æ‹©" @change="handleProductChange">
              <el-option v-for="item in optionsProduct" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
            <el-select v-model="valueProduct" placeholder="è¯·é€‰æ‹©" @change="handleProductChange">
              <el-option v-for="item in optionsProduct" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
          </div>
          <div class="card-wrap">
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">æœ¬æœŸé£é™©æ”¶ç›Šæ°´å¹³</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/cardImg1.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">1.68</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">å¹´åˆé£é™©æ”¶ç›Šæ°´å¹³</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/cardImg1.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">1.89</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">è¾ƒå¹´åˆ</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/down.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">0.21</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="loantrend" id="productLatEcharts"></div>
        </div>
        <div class="block3">
          <div class="subtitle1">
            <div class="subtitle-text1">å®¢æˆ·ç»´åº¦</div>
            <img class="subtitle-img1" src="assets/images/screenfull/risk_title_bg.png" />
          </div>
          <img class="block3-line" src="assets/images/screenfull/mapLine_bottom.png" />
          <div class="bank-range">
            <el-select v-model="valuePerson" placeholder="è¯·é€‰æ‹©" @change="handleProductChange">
              <el-option v-for="item in optionsPerson" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
            <el-select v-model="valuePerson" placeholder="è¯·é€‰æ‹©" @change="handleCustomerChange">
              <el-option v-for="item in optionsPerson" :key="item.value" :label="item.label" :value="item.value">
              </el-option>
            </el-select>
          </div>
          <div class="card-wrap">
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">æœ¬æœŸé£é™©æ”¶ç›Šæ°´å¹³</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/cardImg1.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">1.68</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">å¹´åˆé£é™©æ”¶ç›Šæ°´å¹³</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/cardImg1.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">1.89</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="card-wrap">
              <div class="card-list mgrt8">
                <div class="card-text">è¾ƒå¹´åˆ</div>
                <div class="card-content">
                  <img class="card-img" src="assets/images/screenfull/down.png" />
                  <div class="card-data">
                    <div class="data" style="margin-bottom: 20px">
                      <span style="letter-spacing: -0.5px">0.21</span>
                      <span class="font8" style="margin-right: -7px; margin-left: 1px">%</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="loantrend" id="customerLatEcharts"></div>
        </div>
      </div>
    </div>
  </div>
  <!-- <script src="./assets/js/three.core.min.js"></script> -->
  <script type="module">
    import * as THREE from './assets/js/three.module.js';
    import { update, Tween, Easing } from './assets/js/tween.esm.js';
    // import { OrbitControls } from './assets/js/OrbitControls.js';
    // 1. åœºæ™¯ã€ç›¸æœºã€æ¸²æŸ“å™¨
    const container = document.getElementById('container');
    const width = container.offsetWidth;
    const height = container.offsetHeight;
    const scene = new THREE.Scene();

    const camera = new THREE.PerspectiveCamera(60, width / height, 0.1, 1000);
    camera.position.set(0, 30, 40);
    camera.lookAt(0, 0, 0);

    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(width, height);
    container.appendChild(renderer.domElement);

    // ç¯å…‰
    scene.add(new THREE.AmbientLight(0xffffff, 0.7));
    const light = new THREE.PointLight(0xffffff, 1.2, 100);
    light.position.set(20, 20, 20);
    scene.add(light);

    // åœ°çƒçƒä½“
    const sphereGeometry = new THREE.SphereGeometry(10, 64, 64);
    const sphereMaterial = new THREE.MeshPhongMaterial({
      color: 0x3399ff,
      shininess: 100,
      transparent: true,
      opacity: 0.95,
    });
    const sphere = new THREE.Mesh(sphereGeometry, sphereMaterial);
    scene.add(sphere);

    // æ¨¡å—æ•°æ®
    const moduleData = [
      { title: 'é¡¹ç›®ä¸€', value: '3009.36', icon: 'ğŸ ', desc: 'è¯¦ç»†æ•°æ®1' },
      { title: 'é¡¹ç›®äºŒ', value: '2001.22', icon: 'ğŸ¢', desc: 'è¯¦ç»†æ•°æ®2' },
      { title: 'é¡¹ç›®ä¸‰', value: '1500.00', icon: 'âš¡', desc: 'è¯¦ç»†æ•°æ®3' },
      { title: 'é¡¹ç›®å››', value: '4000.88', icon: 'ğŸ›¡ï¸', desc: 'è¯¦ç»†æ•°æ®4' },
      { title: 'é¡¹ç›®äº”', value: '1234.56', icon: 'ğŸ’°', desc: 'è¯¦ç»†æ•°æ®5' },
      { title: 'é¡¹ç›®å…­', value: '5678.90', icon: 'ğŸ“Š', desc: 'è¯¦ç»†æ•°æ®6' },
      { title: 'é¡¹ç›®ä¸ƒ', value: '8888.88', icon: 'ğŸ”Š', desc: 'è¯¦ç»†æ•°æ®7' },
      { title: 'é¡¹ç›®å…«', value: '9999.99', icon: 'ğŸ—„ï¸', desc: 'è¯¦ç»†æ•°æ®8' },
    ];

    const group = new THREE.Group();
    const modules = [];
    const moduleCount = moduleData.length;
    const radius = 18; // ç¯ç»•åŠå¾„

    for (let i = 0; i < moduleCount; i++) {
      const angle = i * (2 * Math.PI / moduleCount);
      const x = Math.cos(angle) * radius;
      const y = Math.sin(angle) * radius;
      const z = 0;
      // åˆ›å»ºä¸€ä¸ªç»„æ¥åŒ…å«æ¯ä¸ªæ¨¡å—çš„æ‰€æœ‰å…ƒç´ 
      const moduleGroup = new THREE.Group();
      moduleGroup.position.set(x, y, z);
      // 1. æ‰å¹³åœ†æŸ±ä½“
      const cylinderGeometry = new THREE.CylinderGeometry(2, 2, 0.5, 32, 1, false);
      const cylinderMaterial = new THREE.MeshPhongMaterial({ 
        color: 0x3399ff,
        shininess: 80,
        transparent: true,
        opacity: 0.8
      });
      const cylinder = new THREE.Mesh(cylinderGeometry, cylinderMaterial);
      // cylinder.position.set(x, y, z + 0.25);
      
      // 2. icon
      cylinder.rotation.x = Math.PI / 2; // è®©åœ†æŸ±ä½“å¹³èºº
      cylinder.position.set(0, 0, 0.25);
      const iconCanvas = document.createElement('canvas');
      iconCanvas.width = 64; iconCanvas.height = 64;
      const iconCtx = iconCanvas.getContext('2d');
      iconCtx.font = '48px Arial';
      iconCtx.textAlign = 'center';
      iconCtx.textBaseline = 'middle';
      iconCtx.fillText(moduleData[i].icon, 32, 32);
      const iconTexture = new THREE.CanvasTexture(iconCanvas);
      const iconMaterial = new THREE.SpriteMaterial({ map: iconTexture, transparent: true });
      const iconSprite = new THREE.Sprite(iconMaterial);
      iconSprite.position.set(0, 0, 3);
      iconSprite.scale.set(3, 3, 1);

      // 3. æ•°æ®æ•°å€¼
      const valueCanvas = document.createElement('canvas');
      valueCanvas.width = 128; valueCanvas.height = 40;
      const valueCtx = valueCanvas.getContext('2d');
      valueCtx.font = 'bold 28px Arial';
      valueCtx.textAlign = 'center';
      valueCtx.textBaseline = 'middle';
      valueCtx.fillStyle = '#fff';
      valueCtx.fillText(moduleData[i].value, 64, 20);
      const valueTexture = new THREE.CanvasTexture(valueCanvas);
      const valueMaterial = new THREE.SpriteMaterial({ map: valueTexture, transparent: true });
      const valueSprite = new THREE.Sprite(valueMaterial);
      valueSprite.position.set(0, 0, 5);
      valueSprite.scale.set(5, 1.5, 1);

      // 4. æ ‡é¢˜
      const titleCanvas = document.createElement('canvas');
      titleCanvas.width = 128; titleCanvas.height = 40;
      const titleCtx = titleCanvas.getContext('2d');
      titleCtx.font = 'bold 22px Arial';
      titleCtx.textAlign = 'center';
      titleCtx.textBaseline = 'middle';
      titleCtx.fillStyle = '#3399ff';
      titleCtx.fillText(moduleData[i].title, 64, 20);
      const titleTexture = new THREE.CanvasTexture(titleCanvas);
      const titleMaterial = new THREE.SpriteMaterial({ map: titleTexture, transparent: true });
      const titleSprite = new THREE.Sprite(titleMaterial);
      titleSprite.position.set(0, 0, 7);
      titleSprite.scale.set(5, 1.5, 1);

      // 5. æ•°æ®åœ¨åœ†æŸ±ä½“æ­£å‰æ–¹
      const dataCanvas = document.createElement('canvas');
      dataCanvas.width = 128; dataCanvas.height = 40;
      const dataCtx = dataCanvas.getContext('2d');
      dataCtx.font = 'bold 20px Arial';
      dataCtx.textAlign = 'center';
      dataCtx.textBaseline = 'middle';
      dataCtx.fillStyle = '#fff';
      dataCtx.fillText(moduleData[i].desc, 64, 20);
      const dataTexture = new THREE.CanvasTexture(dataCanvas);
      const dataMaterial = new THREE.SpriteMaterial({ map: dataTexture, transparent: true });
      const dataSprite = new THREE.Sprite(dataMaterial);
      // åœ†æŸ±ä½“æ­£å‰æ–¹ï¼ˆx, y, z+1.5ï¼‰ï¼Œå†å¾€å¤–åç§»
      const frontX = Math.cos(angle) * (radius + 3.5);
      const frontY = Math.sin(angle) * (radius + 3.5);
      dataSprite.position.set(frontX, frontY, z + 1.5);
      dataSprite.scale.set(5, 1.5, 1);

      // 6. è™šçº¿è¿æ¥çº¿
      const points = [
        new THREE.Vector3(0, 0, 0.5),
        new THREE.Vector3(0, 0, 7)
      ];
      const lineGeometry = new THREE.BufferGeometry().setFromPoints(points);
      const lineMaterial = new THREE.LineDashedMaterial({
        color: 0x3399ff,
        dashSize: 2,
        gapSize: 1,
        linewidth: 2
      });
      const line = new THREE.Line(lineGeometry, lineMaterial);
      line.computeLineDistances();
      // group.add(line);
      // å°†æ‰€æœ‰å…ƒç´ æ·»åŠ åˆ°æ¨¡å—ç»„
      moduleGroup.add(cylinder, iconSprite, valueSprite, titleSprite, line);
      // åˆ›å»ºä¸€ä¸ªå®¹å™¨ç»„æ¥ä¿æŒæ–¹å‘
      const containerGroup = new THREE.Group();
      containerGroup.add(moduleGroup);
      
      // å°†å®¹å™¨ç»„æ·»åŠ åˆ°ä¸»ç»„
      group.add(containerGroup);
      // æ›´æ–°æ¨¡å—æ•°ç»„
      modules.push({ 
        containerGroup,
        cylinder, 
        iconSprite, 
        valueSprite, 
        titleSprite,
        angle 
      });
    }
    scene.add(group);

    // è‡ªåŠ¨åˆ‡æ¢
    let currentIndex = 0;
    const switchModule = (next = true) => {
      if (!autoRotate && next === true) return; // å¦‚æœæ˜¯è‡ªåŠ¨åˆ‡æ¢ä¸”autoRotateä¸ºfalseï¼Œåˆ™ä¸æ‰§è¡Œ
      currentIndex = (currentIndex + (next ? 1 : -1) + moduleCount) % moduleCount;
      // è®©å½“å‰æ¨¡å—æ­£å¯¹ç”¨æˆ·ï¼ˆzè½´æ—‹è½¬ï¼‰
      const targetAngle = -currentIndex * (2 * Math.PI / moduleCount);
      new Tween(group.rotation)
        .to({ z: targetAngle }, 800)
        .easing(Easing.Cubic.Out)
        .start();
    };
    // è‡ªåŠ¨åˆ‡æ¢åªåœ¨autoRotateä¸ºtrueæ—¶æ‰§è¡Œ
    setInterval(() => { 
      if (autoRotate) {
        switchModule(true);
      }
    }, 2500);

    document.getElementById('btn-prev').onclick = () => { autoRotate = false; switchModule(false); };
    document.getElementById('btn-next').onclick = () => { autoRotate = false; switchModule(true); };

    // æ‚¬æµ®å¼¹çª—
    const raycaster = new THREE.Raycaster();
    const mouse = new THREE.Vector2();
    const popup = document.getElementById('popup');
    let autoRotate = true;
    // æ·»åŠ é¼ æ ‡ç§»å‡ºå®¹å™¨çš„äº‹ä»¶ç›‘å¬
    container.addEventListener('mouseleave', function() {
      autoRotate = true;
      popup.style.display = 'none';
    });
    renderer.domElement.addEventListener('mousemove', function(event) {
      const rect = renderer.domElement.getBoundingClientRect();
      mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
      mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
      raycaster.setFromCamera(mouse, camera);
      
      // è·å–æ‰€æœ‰å¯èƒ½è¢«ç‚¹å‡»çš„å¯¹è±¡
      const intersectObjects = modules.map(m => m.cylinder);
      const intersects = raycaster.intersectObjects(intersectObjects);
      // const intersects = raycaster.intersectObjects(modules);
      if (intersects.length > 0) {
        autoRotate = false;
        // const moduleIndex = modules.indexOf(intersects[0].object);
        // æ‰¾åˆ°è¢«ç‚¹å‡»çš„åœ†æŸ±ä½“å¯¹åº”çš„æ¨¡å—ç´¢å¼•
        const cylinderIndex = intersectObjects.indexOf(intersects[0].object);
        popup.style.display = 'block';
        popup.innerHTML = `<b>${moduleData[cylinderIndex].title}</b><br>æ•°å€¼ï¼š${moduleData[cylinderIndex].value}<br>${moduleData[cylinderIndex].desc}`;
        // popup.innerHTML = `<b>${moduleData[moduleIndex].title}</b><br>æ•°å€¼ï¼š${moduleData[moduleIndex].value}<br>${moduleData[moduleIndex].desc}`;

        // å¼¹çª—å®šä½ - ä½¿ç”¨clientX/clientYæ¥ç¡®ä¿æ­£ç¡®çš„å±å¹•ä½ç½®
        const x = event.clientX;
        const y = event.clientY;
        popup.style.left = x + 20 + 'px';
        popup.style.top = y - 20 + 'px';
      } else {
        // æ¢å¤è‡ªåŠ¨æ—‹è½¬
        autoRotate = true;
        popup.style.display = 'none';
      }
    }); 
    // æ¸²æŸ“å¾ªç¯
    function animate() {
      requestAnimationFrame(animate);
      update();
      renderer.render(scene, camera);
    }
    animate();

    // å“åº”å¼
    window.addEventListener('resize', () => {
      const width = container.offsetWidth;
      const height = container.offsetHeight;
      camera.aspect = width / height;
      camera.updateProjectionMatrix();
      renderer.setSize(width, height);
    });
  </script>
  <script src="assets/js/createVue.js"></script>
  <!-- <script src="assets/js/map.js"></script> -->
  <!-- <script src="assets/js/lineEcharts.js"></script> -->
</body>

</html>